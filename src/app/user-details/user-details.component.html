<h1 class="font-bold text-lg mb-4">User details</h1>
<div class="grid grid-cols-2 gap-4">
  <div class="col-span-1 bg-white shadow-lg p-4 rounded-md h-fit">
    <div class="flex flex-col gap-4 h-full">
      <form class="flex flex-col gap-2">
        <div class="">
          <label for="fullName" class="font-semibold text-md">Full name:</label>
          <input
            type="text"
            class="w-full border-2 read-only:border-transparent rounded-md p-2 border-blue-400 transition-all outline-none"
            name="fullName"
            id="fullName"
            [formControl]="fullNameControl"
            [readOnly]="!isEditing"
          />
        </div>
        <div class="">
          <label for="socialId" class="font-semibold text-md">SocialID:</label>
          <input
            type="text"
            class="w-full border-2 read-only:border-transparent rounded-md p-2 border-blue-400 transition-all outline-none"
            name="socialId"
            id="socialId"
            [formControl]="socialIdControl"
            [readOnly]="!isEditing"
          />
        </div>
        <div class="">
          <label for="fixedAddress" class="font-semibold text-md"
            >Fixed Address:</label
          >
          <input
            type="text"
            class="w-full border-2 read-only:border-transparent rounded-md p-2 border-blue-400 transition-all outline-none"
            name="fixedAddress"
            id="fixedAddress"
            [formControl]="fixedAddressControl"
            [readOnly]="!isEditing"
          />
        </div>
        <div class="">
          <label for="address" class="font-semibold text-md">Address</label>
          <input
            type="text"
            class="w-full border-2 read-only:border-transparent rounded-md p-2 border-blue-400 transition-all outline-none"
            name="address"
            id="address"
            [formControl]="addressControl"
            [readOnly]="!isEditing"
          />
        </div>
      </form>
      <div class="flex gap-4 flex-wrap justify-self-end">
        <ng-container *ngIf="isEditing; else elseTemplate">
          <button
            class="px-4 py-2 bg-green-400 text-white rounded-lg hover:-translate-y-1 hover:shadow-md active:shadow-none active:translate-y-0 transition-all"
            type="button"
            (click)="handleSubmitEdit(userId)"
          >
            Save
          </button>
          <button
            class="px-4 py-2 bg-red-500 text-white rounded-lg hover:-translate-y-1 hover:shadow-md active:shadow-none active:translate-y-0 transition-all"
            type="button"
            (click)="handleCancelEdit()"
          >
            Cancel
          </button>
        </ng-container>
        <ng-template #elseTemplate>
          <button
            class="px-4 py-2 bg-yellow-200 rounded-lg hover:-translate-y-1 hover:shadow-md active:shadow-none active:translate-y-0 transition-all"
            type="button"
            (click)="toggleEditHandler()"
          >
            Edit
          </button>
          <button
            class="px-4 py-2 bg-red-500 text-white rounded-lg hover:-translate-y-1 hover:shadow-md active:shadow-none active:translate-y-0 transition-all"
            type="button"
            (click)="handleDeleteUser(user.id)"
          >
            Delete
          </button>

          <a href="/">
            <button
              class="px-4 py-2 bg-green-500 text-white rounded-lg hover:-translate-y-1 hover:shadow-md active:shadow-none active:translate-y-0 transition-all"
              type="button"
            >
              Go Back
            </button>
          </a>
        </ng-template>
      </div>
    </div>
  </div>
  <div class="col-span-1 bg-white shadow-lg p-4 rounded-md">
    <div class="gap-4 flex flex-col">
      <ng-container *ngIf="!isCreatingParent; else createParentTemplate">
        <div class="">
          <button
            type="button"
            class="w-full px-2 py-4 font-semibold text-3xl hover:animate-pulse hover:bg-blue-400 hover:text-white rounded-md transition-all border-2 border-blue-400"
            (click)="toggleCreateParentHandler()"
          >
            Add parents +
          </button>
        </div>
      </ng-container>
      <ng-template #createParentTemplate>
        <app-parent-create-form
          (cancelCreateEvent)="toggleCreateParentHandler()"
          (parentCreatedEvent)="handleAddNewParent($event)"
          [userId]="userId"
        ></app-parent-create-form>
      </ng-template>

      <div class="h-[50vh] overflow-y-auto flex gap-4 flex-col">
        <div *ngFor="let parent of user.parents">
          <app-parent-card
            [parent]="parent"
            (parentDeletedEvent)="handleRemoveParent($event)"
          ></app-parent-card>
        </div>
      </div>
    </div>
  </div>
</div>
